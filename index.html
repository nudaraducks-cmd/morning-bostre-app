<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morning Booster | Madawa Wijesingha</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --bg: #0b0f1a; --accent: #00d2ff; --glass: rgba(255, 255, 255, 0.05); }
@@ -35,8 +36,9 @@
        .review-card.correct { border-left-color: #28a745; }
        .review-card.wrong { border-left-color: #dc3545; }

        /* Result Image */
        .result-img { width: 100%; max-width: 250px; border-radius: 20px; margin-bottom: 20px; border: 2px solid var(--accent); box-shadow: 0 0 15px rgba(0, 210, 255, 0.2); }
        /* Result Animation */
        .result-img { width: 100%; max-width: 250px; margin-bottom: 15px; filter: drop-shadow(0 0 20px rgba(0, 210, 255, 0.4)); animation: float 3s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-15px); } 100% { transform: translateY(0px); } }

        /* --- Flashcard Styling --- */
        .flash-section { margin-top: 30px; }
@@ -118,7 +120,7 @@
        <audio id="snd-correct" src="https://cdn.pixabay.com/audio/2021/08/04/audio_bbd134918e.mp3"></audio>
        <audio id="snd-wrong" src="https://cdn.pixabay.com/audio/2022/03/10/audio_c030d35967.mp3"></audio>

        <div class="teacher-header text-center">
        <div class="teacher-header text-center animate__animated animate__fadeInDown">
            <img src="ChatGPT Image Dec 28, 2025, 08_23_10 AM.png" class="teacher-img" onerror="this.src='https://via.placeholder.com/90'">
            <div>
                <h4 class="fw-bold mb-0">MADAWA WIJESINGHA</h4>
@@ -129,7 +131,7 @@
        </div>

        <div id="login-screen" class="container" style="max-width: 400px;">
            <div class="glass-card text-center">
            <div class="glass-card text-center animate__animated animate__zoomIn">
                <h5 class="fw-bold mb-4">Student Login</h5>
                <input type="text" id="log_id" class="form-control mb-3 bg-dark text-white border-0 py-3 rounded-pill text-center" placeholder="ID Number">
                <input type="password" id="log_pass" class="form-control mb-4 bg-dark text-white border-0 py-3 rounded-pill text-center" placeholder="Password">
@@ -138,7 +140,7 @@
        </div>

        <div id="dashboard" class="container" style="display:none; max-width: 600px;">
            <div class="glass-card text-center">
            <div class="glass-card text-center animate__animated animate__fadeIn">
                <h5 class="fw-bold mb-1" id="greeting-text">...</h5>
                <p id="user-display-name" class="text-white-50 small mb-4"></p>
                <div class="d-flex justify-content-between mb-3 small text-white-50">
@@ -149,9 +151,9 @@
                <p id="status-msg" class="text-warning small fw-bold d-none"></p>
            </div>

            <div class="glass-card"><canvas id="progressChart" height="180"></canvas></div>
            <div class="glass-card animate__animated animate__fadeInUp"><canvas id="progressChart" height="180"></canvas></div>

            <div class="flash-section">
            <div class="flash-section animate__animated animate__fadeInUp" style="animation-delay: 0.2s;">
                <h6 class="text-white-50 small fw-bold mb-3 ps-2 text-uppercase"><i class="fas fa-redo text-info me-2"></i>Space Repetition Revision</h6>
                <div id="flash-display-area" class="flash-container-wrapper">
                    <div class="text-muted small">Loading tailored cards...</div>
@@ -162,16 +164,16 @@
        <div id="game-view">
            <div class="container py-3">
                <div class="timer-circle" id="timer">60</div>
                <h5 id="q-text" class="mb-4 text-center fw-bold"></h5>
                <h5 id="q-text" class="mb-4 text-center fw-bold animate__animated animate__fadeInLeft"></h5>
                <div id="options-box"></div>
                <button id="next-btn" class="btn btn-primary w-100 py-3 rounded-pill mt-4 fw-bold" onclick="nextQuestion()">NEXT QUESTION</button>
            </div>
        </div>

        <div id="result-screen" class="container py-5 text-center" style="display:none;">
            <div class="glass-card py-5">
                <img src="scene_5.png" class="result-img" alt="Completed" onerror="this.style.display='none'">
                <h2 class="text-accent fw-bold mb-3">COMPLETED!</h2>
            <div class="glass-card py-5 animate__animated animate__jackInTheBox">
                <img src="scene_15.png" class="result-img" alt="Completed" onerror="this.src='scene_5.png'">
                <h2 class="text-accent fw-bold mb-3 animate__animated animate__pulse animate__infinite">COMPLETED!</h2>
                <p id="result-msg" class="mb-4 px-3 fw-bold"></p>
                <a id="result-url" href="#" target="_blank" class="btn btn-success btn-lg rounded-pill px-5 fw-bold mb-3 w-100 shadow">Watch Explanation</a>
                <button class="btn btn-outline-info rounded-pill w-100 fw-bold" onclick="showReview()">Review Answers</button>
@@ -352,7 +354,7 @@
            selectedIdx = null; const q = currentPack.questions[qKeys[currentQIndex]];
            document.getElementById('q-text').innerText = q.text;
            const box = document.getElementById('options-box'); box.innerHTML = "";
            q.options.forEach((opt, i) => { if(opt) box.innerHTML += `<button class="option-btn" onclick="sel(${i+1}, ${q.correct})">${opt}</button>`; });
            q.options.forEach((opt, i) => { if(opt) box.innerHTML += `<button class="option-btn animate__animated animate__fadeInUp" style="animation-delay: ${i*0.1}s" onclick="sel(${i+1}, ${q.correct})">${opt}</button>`; });
            startTimer(60);
        }

@@ -395,16 +397,16 @@
            const list = document.getElementById('review-list'); list.innerHTML = "";
            userResponses.forEach((res, i) => {
                const q = currentPack.questions[qKeys[i]];
                list.innerHTML += `<div class="glass-card mb-2 border-${res.isCorrect?'success':'danger'}"><p class="small mb-1">Q${i+1}: ${q.text}</p><div class="small fw-bold text-${res.isCorrect?'success':'danger'}">Correct: ${q.options[q.correct-1]}</div></div>`;
                list.innerHTML += `<div class="glass-card mb-2 border-${res.isCorrect?'success':'danger'} animate__animated animate__fadeInLeft"><p class="small mb-1">Q${i+1}: ${q.text}</p><div class="small fw-bold text-${res.isCorrect?'success':'danger'}">Correct: ${q.options[q.correct-1]}</div></div>`;
            });
        };

        async function loadChart() {
            const snap = await get(ref(db, `results`)); if(!snap.exists()) return;
            const dates = Object.keys(snap.val()).sort().slice(-7);
            const scores = dates.map(d => snap.val()[d][session.id]?.score || 0);
            new Chart(document.getElementById('progressChart'), { type: 'line', data: { labels: dates, datasets: [{ data: scores, borderColor: '#00d2ff', backgroundColor: 'rgba(0,210,255,0.1)', fill: true, tension: 0.4 }] }, options: { plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, max: 35 } } } });
        }
    </script>
</body>
</html>
